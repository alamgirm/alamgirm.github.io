<!DOCTYPE html>
<html>
<head>
    <!-- [[! Document Settings ]] -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- [[! Page Meta ]] -->
    <title>Serial Communications- How to</title>
    <meta name="description" content="Alamgir's Blog - Programming, Automation, Data Science, Machine Learning, Visualizations, Arduino, Raspberry Pi and other IoT." />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="/assets/images/favicon.ico" >

    <!-- [[! Styles'n'Scripts ]] -->
    <link rel="stylesheet" type="text/css" href="/assets/css/screen.css" />
    <link rel="stylesheet" type="text/css"
          href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />
    <link rel="stylesheet" type="text/css" href="/assets/css/syntax.css" />

    <!-- [[! highlight.js ]] -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- [[! Ghost outputs important style and meta data with this tag ]] -->
        <link rel="canonical" href="/" />
    <meta name="referrer" content="origin" />
    <link rel="next" href="/page2/" />

    <meta property="og:site_name" content="Alamgir's Blog" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Alamgir's Blog" />
    <meta property="og:description" content="Programming, Automation, Data Science, Machine Learning, Visualizations, Arduino, Raspberry Pi and other IoT." />
    <meta property="og:url" content="/" />
    <meta property="og:image" content="/assets/images/cover1.jpg" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Alamgir's Blog" />
    <meta name="twitter:description" content="Programming, Automation, Data Science, Machine Learning, Visualizations, Arduino, Raspberry Pi and other IoT." />
    <meta name="twitter:url" content="/" />
    <meta name="twitter:image:src" content="/assets/images/cover1.jpg" />

    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "blog",
    "publisher": "Alamgir Mohammed",
    "url": "/",
    "image": "/assets/images/cover1.jpg",
    "description": "Programming, Automation, Data Science, Machine Learning, Visualizations, Arduino, Raspberry Pi and other IoT."
}
    </script>

    <meta name="generator" content="Jekyll 3.0.0" />
    <link rel="alternate" type="application/rss+xml" title="Alamgir's Blog" href="/feed.xml" />


</head>
<body class="home-template nav-closed">

    <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        <li class="nav-home " role="presentation"><a href="/">Home</a></li>
        <li class="nav-about " role="presentation"><a href="/about">About</a></li>
        <li class="nav-emb " role="presentation"><a href="/tag/Data Science">Data Science</a></li>
        <li class="nav-emb " role="presentation"><a href="/tag/Machine Learning">Machine Learning</a></li>
        <li class="nav-emb " role="presentation"><a href="/tag/Programming">Programming</a></li>
        <li class="nav-emb " role="presentation"><a href="/tag/Visualization">Visualization</a></li>
        <li class="nav-ard " role="presentation"><a href="/tag/Arduino">Arduino</a></li>
        <li class="nav-rasp " role="presentation"><a href="/tag/Raspberry Pi">Raspberry Pi</a></li>
        <li class="nav-iot " role="presentation"><a href="/tag/IoT">IoT</a></li>
	<li class="nav-author " role="presentation"><a href="/author/alamgir">Author</a></li>
    </ul>
    <a class="subscribe-button icon-feed" href="/feed.xml">Subscribe</a>
</div>
<span class="nav-cover"></span>


    <div class="site-wrapper">

        <!-- [[! Everything else gets inserted here ]] -->
        <!-- < default -->

<!-- The comment above "< default" means - insert everything in this file into -->
    <!-- the [body] of the default.hbs template, which contains our header/footer. -->

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<header class="main-header post-head " style="background-image: url(/assets/images/cover/cover7.jpg) ">
    <nav class="main-nav  overlay  clearfix">
        <a class="blog-logo" href="/"><img src="/assets/images/ghost.png" alt="Blog Logo" /></a>
        
            <a class="menu-button icon-menu" href="#"><span class="word">Menu</span></a>
        
    </nav>
</header>

<main class="content" role="main">

    <article class="post tag-test tag-content">

        <header class="post-header">
            <h1 class="post-title">Serial Communications- How to</h1>
            <section class="post-meta">
            <!-- <a href='/'>alamgir</a> -->
            <time class="post-date" datetime="2017-07-08">08 Jul 2017</time>
                <!-- [[tags prefix=" on "]] -->
                 
                on 
                
                    
                       <a href='/tag/Serial Communication'>Serial communication</a>,
                       
                
                    
                       <a href='/tag/RS232'>Rs232</a>
                       
                
                
            </section>
        </header>

        <section class="post-content">
            
            <p><img src="/assets/images/2017/2017_07_08_RS232.png" alt="RS232" class="leftimg" /> Digital systems need to communicate, even devices within a single system need to communicate with each other. In hardware, this means exachanges of digital signals between two parties. Since data are represented as binary numbers in a digital system, transferring of a binary number can happen in two manners: all the bits in one go (in parallel) or one bit at a time (in serial). This gives rise to design of two types of communication system: parallel and serial. The first thing to note is parallel communication needs more wires but supposedly transfer data in relatively faster manner. In contrast, serial communication can work with fewer wires, but would take longer to transfer the same amount of data. From this, it might look that parallel communication is ‘better’ than serial one, but in reality this is hardly the case.</p>

<!--more-->

<h2 id="role-of-clock-synchronous-vs-asyncrhonous">Role of Clock: synchronous vs asyncrhonous</h2>
<p>When two parties communicate, it is very important that they are on the same page, i.e, the receiver understands what the sender is sending. In Digital communication, at the hardwire level, the reciver must know when a bit starts, how long is the duration etc. One very common way to keep both the parties in synch is to use a series of rectangular pulse, known as clcok signal, clock pulse, or simply clock. Generally the sender party is responsible for sending the clock and the receiver gets in synch to it, before trying to detect the data. This is syncrhonous communication. While this sounds good, there are more problems with sending clock: they get smeared over distance, and suffer from jitter. The problems are sometimes so bad, that it is now very common not use any separete clock at all. Rather, the data signal itself has built-in clock signal. In this case, the reciever runs its own clock, but aligns it when a wave of data comes in. This is asynchrounous communication.</p>

<h3 id="line-coding-of-data">Line-coding of Data</h3>
<p>We know data are represented in Binary in digital systems, and often a bianry 1 means HIGH voltage (3.3V or 5V) and 0 means LOW voltage (0V). However, it is not uncommon to use a <em>negative voltgate to indicate 1</em>. In addition,  when we send these data over a communication line, there is one more thing: the duration of each bit. The receiver must know how long a bit lasts. Bits are sent one after another without any gap in between, so the receiver must also know when it is to start, when it should stop.</p>

<p>In one particluar instance (RS232- see later) of serial communication, few bits of Binary data are sent as a frame. A frame is a single unit, the receive either receives it fully as good or discards it. The start of frame is indicated by a LOW pulse, followed by the data bits. A parity bit is then added for error checking, followed by one or two stop bits (HIGH) indicating the end of frame. The duration of each data bit, (inversion of which called baud rate), number of data bits, type of parity and number of stop bits- these are all configurable parameters. The hardwire chip (often called UART chip)  expects these parameters before a transmission could begin. UART chips are dumb in the sense that they do not have the capability to negotiate the parameters with other party, it depends on the programmer to set the parameters.
<img src="/assets/images/2017/2017_07_08_linecoding.png" alt="RS232 Line coding" /></p>

<p>This little picture needs some explanation. The start bit is ALWAYS low, it designates the start of the frame. So as the UART on the receiving end while monitoring its RX line, can start to detect data bits the moment RX goes LOW. The next few pulses can be HIGH or LOW or a mixture, depedning on exactly what the data bits are. This is the greay area in the picture. To help check with error detection the sender party may add an extra parity bit. It could be either LOW or HIGH depending on the party type in use, or even omitted if no parity is used. This decision is made by the developer, when configuring the UARTs. Finally the stop bit(s) are always HIGH, the red area in the picure. The duration can be double of the start bit if two stop bits are required.</p>

<h3 id="rs232">RS232</h3>
<p>RS232 is a very old stadard of serial communication, long before modern day PCs have come. It evolved over time, came down to 9-pin from original 25-pin connector, and now even bare 3-pin/line communication is quite common.  At this bare minimum, we have a TX (transmit), RX (receive), and a GND (ground) line. TX and RX are crossed bewtween the devies that communicate, so that either of the device can send data to another. Data can flow full-duplex, meaning both parties can send/recieve simultaneously (as they use different physical lines).</p>

<p>In embedded development a serial link (not exactly an RS232) is often used to either program a board or connect a serial display terminal. Recent PCs dont have any RS232 port any more, so a USB to Serial converter is used. The original RS232 stipulated a +3V to +15V for representing a Binary 0 and -3V to -15V for a Binary 1. For the serial communication on embedded boards, and popular IoT baords, the voltage level is reversed and reduced. A Binary 0 is often 0V and a Binary 1, is either 3.3V or 5V. This is <em>opposite</em> of what the RS232 standard uses. To avoid confusion, some people refer to this as <em>TTL Serial</em>. It is to remember that the start bit is still a LOW pulse, and the stop bit(s) is HIGH.</p>

<p>The baud rate is standardized to any of 1200, 2400, 4800, 9600, 19200, 38400, 57600, and 115200. The rate 9600 is the most common, some using 115200 for short cable. The <em>TTL Serial</em> adheres to the same standard baud rates.</p>

<h3 id="configuration-example">Configuration Example</h3>
<p>If we want the baud rate of 9600, 8-bits of data, no parity, and just one stop bit, then each frame would have 10-bits. The extra two bits (start and stop) are overhead, but we have to use them to make the communication happen.</p>

<h4 id="terminal-emulator">Terminal Emulator</h4>
<p>Finally there is a software tool that can emulate a serial terminal. This when connected to an embedded board helps us to see what is going on. On Linux platforms <code class="highlighter-rouge">picocom</code> and <code class="highlighter-rouge">minicom</code> are two popular serial terminal emulator. Again, before they could display something meaningful, they need to be configured with correct baud rate, data bits, parity and stop bits.</p>

<h3 id="common-mistakes">Common Mistakes</h3>

<ul>
  <li>The configuration parameters: baud rate, data length, parity and stop bit must be set at the <em>BOTH</em> end of the link. Both the UART must have the same parameters to make the communication workable.</li>
  <li>The TX and RX lines <em>MUST</em> be crossed- othewise there is no chance of communication.</li>
  <li>Some boards are powered by 3.3V supply, and cant withstand any voltage higher than that. Make sure the USB to Serial converter does not have 5V in such case.</li>
  <li>Serial communication is point-to-point or party to party. It can have more than two devices. If more than 2 devices are connected on the same wires, it wont work.</li>
</ul>


        </section>

        <footer class="post-footer">

            <!-- Everything inside the #author tags pulls data from the author -->
            <!-- #author-->

            
            <figure class="author-image">
                <a class="img" href="/author/alamgir" style="background-image: url(/assets/images/alamgir.jpg)"><span class="hidden">'s Picture</span></a>
            </figure>
            

            <section class="author">
                <h4><a href="/author/alamgir">alamgir</a></h4>
                
                
                    <p> A human being with passion for science, technology, music and history.</p>
                
                <div class="author-meta">
                    <span class="author-location icon-location"> Ontario, Canada</span> 
                    <span class="author-link icon-link"><a href="https://alamgirm.github.io"> https://alamgirm.github.io/blog/</a></span> 
                </div>
            </section>

            <!-- /author  -->

            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="http://twitter.com/share?text=Serial Communications- How to&amp;url=https://alamgirm.github.ioserial-communication-how-to"
                    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://alamgirm.github.ioserial-communication-how-to"
                    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=https://alamgirm.github.ioserial-communication-how-to"
                   onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>
            
            <!-- Add Disqus Comments -->
            <!-- if page.disqus  -->
                <div id="disqus_thread"></div>
<script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'true'; // required: replace example with your forum shortname
        var disqus_identifier = '/serial-communication-how-to';
        var disqus_url = 'https://alamgirm.github.io/serial-communication-how-to';
 
            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>

            <!--  endif  -->
            
        </footer>

    </article>

</main>

<aside class="read-next">

    <!-- [[! next_post ]] -->
    
        <a class="read-next-story " style="background-image: url(/assets/images/cover/cover7.jpg)" href="/Barebone-AVR-Programming-LED-Blinker">
            <section class="post">
                <h2>Barebone AVR Programming - LED Blinker</h2>
                <p>Arduino is fun and easy, and it gives the best introducton to AVR processors. However,...</p>
            </section>
        </a>
    
    <!-- [[! /next_post ]] -->
    <!-- [[! prev_post ]] -->
    
        <a class="read-next-story prev " style="background-image: url(/assets/images/cover/cover7.jpg)" href="/basics-of-block-storage-device">
            <section class="post">
                <h2>Basics of block storage devices</h2>
                <p>Today’s mass storage devices include magnetic hard disk, solid state drive, and often flash drive....</p>
            </section>
        </a>
    
    <!-- [[! /prev_post ]] -->
</aside>

<!-- /post -->


        <footer class="site-footer clearfix">
          <section class="copyright"><a href="/">Alamgir's Blog</a> &copy; 2017</section>
          <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> using <a href="https://github.com/biomadeira/jasper">Jasper</a></section>
        </footer>
    </div>
    <!-- [[! Ghost outputs important scripts and data with this tag ]] -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <!-- [[! The main JavaScript file for Casper ]] -->
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="/assets/js/index.js"></script>

    <!-- Add Google Analytics  -->
        <!-- Google Analytics Tracking code -->
     <script>
	    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	    ga('create', 'UA-450244-4', 'auto');
	    ga('send', 'pageview');

     </script>   
</body>
</html>
