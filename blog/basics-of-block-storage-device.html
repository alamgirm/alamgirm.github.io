<!DOCTYPE html>
<html>
<head>
    <!-- [[! Document Settings ]] -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- [[! Page Meta ]] -->
    <title>Basics of block storage devices</title>
    <meta name="description" content="Alamgir's Blog - Programming, Automation, Data Science, Machine Learning, Visualizations, Arduino, Raspberry Pi and other IoT." />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="/assets/images/favicon.ico" >

    <!-- [[! Styles'n'Scripts ]] -->
    <link rel="stylesheet" type="text/css" href="/assets/css/screen.css" />
    <link rel="stylesheet" type="text/css"
          href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />
    <link rel="stylesheet" type="text/css" href="/assets/css/syntax.css" />

    <!-- [[! highlight.js ]] -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- [[! Ghost outputs important style and meta data with this tag ]] -->
        <link rel="canonical" href="/" />
    <meta name="referrer" content="origin" />
    <link rel="next" href="/page2/" />

    <meta property="og:site_name" content="Alamgir's Blog" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Alamgir's Blog" />
    <meta property="og:description" content="Programming, Automation, Data Science, Machine Learning, Visualizations, Arduino, Raspberry Pi and other IoT." />
    <meta property="og:url" content="/" />
    <meta property="og:image" content="/assets/images/cover1.jpg" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Alamgir's Blog" />
    <meta name="twitter:description" content="Programming, Automation, Data Science, Machine Learning, Visualizations, Arduino, Raspberry Pi and other IoT." />
    <meta name="twitter:url" content="/" />
    <meta name="twitter:image:src" content="/assets/images/cover1.jpg" />

    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "blog",
    "publisher": "Alamgir Mohammed",
    "url": "/",
    "image": "/assets/images/cover1.jpg",
    "description": "Programming, Automation, Data Science, Machine Learning, Visualizations, Arduino, Raspberry Pi and other IoT."
}
    </script>

    <meta name="generator" content="Jekyll 3.0.0" />
    <link rel="alternate" type="application/rss+xml" title="Alamgir's Blog" href="/feed.xml" />


</head>
<body class="home-template nav-closed">

    <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        <li class="nav-home " role="presentation"><a href="/">Home</a></li>
        <li class="nav-about " role="presentation"><a href="/about">About</a></li>
        <li class="nav-emb " role="presentation"><a href="/tag/Data Science">Data Science</a></li>
        <li class="nav-emb " role="presentation"><a href="/tag/Machine Learning">Machine Learning</a></li>
        <li class="nav-emb " role="presentation"><a href="/tag/Programming">Programming</a></li>
        <li class="nav-emb " role="presentation"><a href="/tag/Visualization">Visualization</a></li>
        <li class="nav-ard " role="presentation"><a href="/tag/Arduino">Arduino</a></li>
        <li class="nav-rasp " role="presentation"><a href="/tag/Raspberry Pi">Raspberry Pi</a></li>
        <li class="nav-iot " role="presentation"><a href="/tag/IoT">IoT</a></li>
	<li class="nav-author " role="presentation"><a href="/author/alamgir">Author</a></li>
    </ul>
    <a class="subscribe-button icon-feed" href="/feed.xml">Subscribe</a>
</div>
<span class="nav-cover"></span>


    <div class="site-wrapper">

        <!-- [[! Everything else gets inserted here ]] -->
        <!-- < default -->

<!-- The comment above "< default" means - insert everything in this file into -->
    <!-- the [body] of the default.hbs template, which contains our header/footer. -->

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<header class="main-header post-head " style="background-image: url(/assets/images/cover/cover7.jpg) ">
    <nav class="main-nav  overlay  clearfix">
        <a class="blog-logo" href="/"><img src="/assets/images/ghost.png" alt="Blog Logo" /></a>
        
            <a class="menu-button icon-menu" href="#"><span class="word">Menu</span></a>
        
    </nav>
</header>

<main class="content" role="main">

    <article class="post tag-test tag-content">

        <header class="post-header">
            <h1 class="post-title">Basics of block storage devices</h1>
            <section class="post-meta">
            <!-- <a href='/'>alamgir</a> -->
            <time class="post-date" datetime="2017-06-23">23 Jun 2017</time>
                <!-- [[tags prefix=" on "]] -->
                 
                on 
                
                    
                       <a href='/tag/Block Storage'>Block storage</a>,
                       
                
                    
                       <a href='/tag/HDD'>Hdd</a>
                       
                
                
            </section>
        </header>

        <section class="post-content">
            
            <p><img src="/assets/images/2017/2017_06_hard_disk.png" alt="Hard disk" class="leftimg" /> Today’s mass storage devices include magnetic hard disk, solid state drive, and often flash drive. Though technologically quite different, all these storage classes have one thing in common: they are accessed in a bigger chunk of data unit, not by a byte. This unit of access is called block (sometimes also called page). The internal technology, organizational structure etc could be whatever but the storage device’s adapter IDE/SATA/PATA/SCSI exposes the storage in a uniform manner to the operating system.</p>

<!--more-->

<h2 id="magnetic-hard-disks">Magnetic Hard Disks</h2>
<p>A magnetic hard disk, often simply hard disk drive, consists of  a set of metal circular platter put together in a spindle. A 2.5-inch drive now can have a maximum of 5 platters (max capacity 5TB), while a 3.5-inch drive can have 5 to 8 platers (max 12TB).  Read/Write heads are placed just a thin air away of the surfaces on each platter. Heads are numbered. Each surface of a platter is hypothetically considered to have circular tracks, each track split into sectors. Tracks are numbered too, begining at 0 from outside, increasing towards center. Physical size of sectors are bigger around the outer side of the platter, and gets smaller towards the centre. However, to keep things simple each sector is capable of storing equal amount of data, most commonly 512 bytes. (A newer standard called Advanced Format is calling for 4096 bytes).</p>

<p>Same numbered tracks on all the platters are imagined to form a cylinder. Therefore, to identify a particular track, one needs a cylinder number and head number. Once in the desired track, a sector is the smallest addressable unit identified by another number.  So to identify a sector uniquely in an entire disk, one needs the cylinder, head and sector (CHS) number.</p>

<p>Older PCs would access storage (both floppy and hard) using these CHS addressing. The PC BIOS interrupt 13hex allowed/served that. However, with the wider adoption of hard disks, and increasing storage capacity, CHS was found to be unncessarily complex and burdensome for the operating system (since it is the OS that manages the storage). Then came LBA.</p>

<h3 id="logical-block-addressing-lba">Logical Block Addressing (LBA)</h3>
<p>In LBA philosopy the entire stoarage is consindered as a linear array of blocks. Each blck is identified by a single block number. Once an address (block number) is given, the hard disk adapter maps that to physical C/H/S. This means LBA is independent of the internal organization of disk, and simply referes them as blocks (which for hard disks are sectors).</p>

<p>LBA address can be 32-bit, 48-bit or even 64-bit, and the addressing is simply linear: starts at zero and grows upward. Which address is mapped to which sector is up to the drive adapter. However, most drives follow a simple forumla. More can be found in <a href="https://en.wikipedia.org/wiki/Logical_block_addressing"> Wikipedia</a>.</p>

<h3 id="disk-partition">Disk Partition</h3>
<p>A physical disk drive can be logically divided into more than one unit and accessed as an independent storage, even by different operating system. There are mainly two schemes on PCs to do that: the legacy MBR (master boot record), and newer GPT (GUID Partition Table). Apple has its own scheme.</p>

<h4 id="master-boot-record-mbr">Master Boot Record (MBR)</h4>
<p>Ignoring the wording “boot record”, lets pretend “MBR” is a scheme to have multiple partitions in a single physical disk drive. The information about the partions (and more) are stored in the first (LBA=0) Block (also a sector for hard disk) of a drive. An “MBR” partitioning scheme can have a maximum of 4 partitions (all 4 primary or 3 primary and 1 extended which in turn can have more <code class="highlighter-rouge">logical partitions</code> within it).  The first primary partion, called <code class="highlighter-rouge">system partition</code> stores opeating system boot files. A layout of a disk with “MBR” scheme is shown below: <img src="/assets/images/2017/2017_06_23_ms_mbr.gif" alt="MBR Scheme" title="MBR scheme" />
The first 440 bytes in the MBR that reads Master Boot Code in the picture is actually executable code. When a PC powers up, the BIOS, as part of the booting proceess, reads those codes and execute them.</p>

<p>Structure of different versions of “MBR” can be found in <a href="https://en.wikipedia.org/wiki/Master_boot_record"> Wikipedia MBR</a> enry.</p>

<h4 id="boot-sector">Boot Sector</h4>
<p>More than one primary partions can have a bootable operating system. The first sector on a partion is boot sector (if it has boot record). Similar to master boot code, boot sector can have executable code that the BIOS or a boot loader loads and executes. The boot sector is only valid for a partion, that is marked as <code class="highlighter-rouge">bootable</code> with a special signature.</p>

<h4 id="guid-partition-table-gpt">GUID Partition Table (GPT)</h4>
<p>Among the few limitations of “MBR” scheme, the partition table entries indicate the begining/ending of a partition as 32-bit LBA. This imposes a limitation of maximum 2TB disk capacity. GPT removes that restrictions, uses 64 bits for LBA, and supports upto 128 partitions. Though originally developed as part of EFI, GPT scheme however leaves the legacy LBA=0 <code class="highlighter-rouge">Protective MBR</code> untouched. An example of a GPT scheme is shown below: <img src="/assets/images/2017/2017_06_23_gpt.png" /></p>

<h4 id="credits">Credits</h4>
<ul>
  <li>The hard disk picture is taken from <a href="http://ccm.net/contents/385-hard-drive"> CCM </a></li>
  <li>The “MBR” picture has been borrowed from  <a href="https://gerardnico.com/wiki/data_storage/partition"> here.</a></li>
  <li>MBR structure is taken from  <a href="https://upload.wikimedia.org/wikipedia/commons/0/07/GUID_Partition_Table_Scheme.svg">wikipedia</a></li>
</ul>


        </section>

        <footer class="post-footer">

            <!-- Everything inside the #author tags pulls data from the author -->
            <!-- #author-->

            
            <figure class="author-image">
                <a class="img" href="/author/alamgir" style="background-image: url(/assets/images/alamgir.jpg)"><span class="hidden">'s Picture</span></a>
            </figure>
            

            <section class="author">
                <h4><a href="/author/alamgir">alamgir</a></h4>
                
                
                    <p> A human being with passion for science, technology, music and history.</p>
                
                <div class="author-meta">
                    <span class="author-location icon-location"> Ontario, Canada</span> 
                    <span class="author-link icon-link"><a href="https://alamgirm.github.io"> https://alamgirm.github.io/blog/</a></span> 
                </div>
            </section>

            <!-- /author  -->

            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="http://twitter.com/share?text=Basics of block storage devices&amp;url=https://alamgirm.github.iobasics-of-block-storage-device"
                    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://alamgirm.github.iobasics-of-block-storage-device"
                    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=https://alamgirm.github.iobasics-of-block-storage-device"
                   onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>
            
            <!-- Add Disqus Comments -->
            <!-- if page.disqus  -->
                <div id="disqus_thread"></div>
<script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'true'; // required: replace example with your forum shortname
        var disqus_identifier = '/basics-of-block-storage-device';
        var disqus_url = 'https://alamgirm.github.io/basics-of-block-storage-device';
 
            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>

            <!--  endif  -->
            
        </footer>

    </article>

</main>

<aside class="read-next">

    <!-- [[! next_post ]] -->
    
        <a class="read-next-story " style="background-image: url(/assets/images/cover/cover7.jpg)" href="/serial-communication-how-to">
            <section class="post">
                <h2>Serial Communications- How to</h2>
                <p>Digital systems need to communicate, even devices within a single system need to communicate with...</p>
            </section>
        </a>
    
    <!-- [[! /next_post ]] -->
    <!-- [[! prev_post ]] -->
    
        <a class="read-next-story prev " style="background-image: url(/assets/images/cover/cover7.jpg)" href="/Inside-ATmega-AVR">
            <section class="post">
                <h2>Inside ATMega AVR microcontroller</h2>
                <p>Atmel offers a wide variety of AVR MCU available in different series or families. MCU...</p>
            </section>
        </a>
    
    <!-- [[! /prev_post ]] -->
</aside>

<!-- /post -->


        <footer class="site-footer clearfix">
          <section class="copyright"><a href="/">Alamgir's Blog</a> &copy; 2017</section>
          <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> using <a href="https://github.com/biomadeira/jasper">Jasper</a></section>
        </footer>
    </div>
    <!-- [[! Ghost outputs important scripts and data with this tag ]] -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <!-- [[! The main JavaScript file for Casper ]] -->
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="/assets/js/index.js"></script>

    <!-- Add Google Analytics  -->
        <!-- Google Analytics Tracking code -->
     <script>
	    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	    ga('create', 'UA-450244-4', 'auto');
	    ga('send', 'pageview');

     </script>   
</body>
</html>
